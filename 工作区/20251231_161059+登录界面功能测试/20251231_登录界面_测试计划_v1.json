{
  "metadata": {
    "version": "1.0",
    "created_date": "2025-12-31",
    "test_type": "functional_test",
    "platform": "PC",
    "target_url": "http://192.168.142.146/login?",
    "test_scope": "登录界面功能测试",
    "max_lines": 500
  },
  "test_environment": {
    "browser": "Chrome",
    "headless": false,
    "timeout": 30,
    "viewport": {"width": 1920, "height": 1080},
    "valid_credentials": {
      "username": "admin",
      "password": "admin123"
    }
  },
  "detected_elements": {
    "username_input": {
      "selector": "input[type='text']",
      "placeholder": "账号",
      "class": "el-input__inner"
    },
    "password_input": {
      "selector": "input[type='password']",
      "placeholder": "密码",
      "class": "el-input__inner"
    },
    "login_button": {
      "selector": ".el-button.el-button--primary.el-button--medium",
      "text": "登 录"
    },
    "form_class": ".el-form.login-form"
  },
  "pre_test_setup": [
    {
      "step": 1,
      "action": "清除预填账号密码",
      "details": {
        "command": "clear_prefilled_fields",
        "description": "输入框可能预填了admin/admin123，必须先清空"
      }
    }
  ],
  "test_cases": [
    {
      "case_id": "TC001",
      "name": "页面初始化验证",
      "priority": "HIGH",
      "precondition": {
        "state": "未登录状态"
      },
      "steps": [
        {
          "step": 1,
          "action": "导航至登录页面",
          "details": {
            "command": "goto",
            "url": "http://192.168.142.146/login?"
          },
          "expected_result": {
            "ui": "登录页面完全加载",
            "network": "页面响应200"
          }
        },
        {
          "step": 2,
          "action": "刷新页面",
          "details": {
            "command": "reload"
          },
          "expected_result": {
            "ui": "页面重新加载"
          }
        },
        {
          "step": 3,
          "action": "清除预填账号",
          "details": {
            "command": "clear",
            "selector": "input[type='text']"
          },
          "expected_result": {
            "ui": "账号输入框为空"
          }
        },
        {
          "step": 4,
          "action": "清除预填密码",
          "details": {
            "command": "clear",
            "selector": "input[type='password']"
          },
          "expected_result": {
            "ui": "密码输入框为空"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "账号输入框",
            "check": "可见且可交互",
            "selector": "input[type='text']",
            "type": "visibility_and_enabled"
          },
          {
            "element": "密码输入框",
            "check": "可见且可交互",
            "selector": "input[type='password']",
            "type": "visibility_and_enabled"
          },
          {
            "element": "登录按钮",
            "check": "可见且可点击",
            "selector": ".el-button.el-button--primary",
            "type": "visibility_and_enabled"
          }
        ],
        "ux_layer": [
          {
            "check": "页面加载完成，无长时间loading",
            "type": "loading_state"
          }
        ]
      }
    },
    {
      "case_id": "TC002",
      "name": "空账号登录测试",
      "priority": "MEDIUM",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "账号输入框保持为空",
          "details": {
            "command": "clear",
            "selector": "input[type='text']"
          },
          "expected_result": {
            "ui": "账号输入框为空"
          }
        },
        {
          "step": 2,
          "action": "输入有效密码",
          "details": {
            "command": "type",
            "selector": "input[type='password']",
            "text": "admin123"
          },
          "expected_result": {
            "ui": "密码输入框显示加密字符"
          }
        },
        {
          "step": 3,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": ".el-button.el-button--primary",
            "wait_for": 2000
          },
          "expected_result": {
            "ux": "登录按钮可点击"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "错误提示",
            "check": "显示账号不能为空提示",
            "type": "text_visible",
            "expected_pattern": "账号|用户名|不能为空|请输入"
          }
        ],
        "ux_layer": [
          {
            "check": "未跳转到其他页面",
            "type": "url_unchanged"
          },
          {
            "check": "登录按钮保持可点击状态",
            "type": "button_enabled"
          }
        ],
        "network_layer": [
          {
            "check": "无登录API请求或请求返回400/401",
            "type": "network_status",
            "expected": "400 or 401 or no_request"
          }
        ]
      }
    },
    {
      "case_id": "TC003",
      "name": "空密码登录测试",
      "priority": "MEDIUM",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "输入有效账号",
          "details": {
            "command": "type",
            "selector": "input[type='text']",
            "text": "admin"
          },
          "expected_result": {
            "ui": "账号输入框显示'admin'"
          }
        },
        {
          "step": 2,
          "action": "密码输入框保持为空",
          "details": {
            "command": "clear",
            "selector": "input[type='password']"
          },
          "expected_result": {
            "ui": "密码输入框为空"
          }
        },
        {
          "step": 3,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": ".el-button.el-button--primary",
            "wait_for": 2000
          },
          "expected_result": {
            "ux": "登录按钮可点击"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "错误提示",
            "check": "显示密码不能为空提示",
            "type": "text_visible",
            "expected_pattern": "密码|不能为空|请输入"
          }
        ],
        "ux_layer": [
          {
            "check": "未跳转到其他页面",
            "type": "url_unchanged"
          }
        ],
        "network_layer": [
          {
            "check": "无登录API请求或请求返回400/401",
            "type": "network_status",
            "expected": "400 or 401 or no_request"
          }
        ]
      }
    },
    {
      "case_id": "TC004",
      "name": "错误账号登录测试",
      "priority": "MEDIUM",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "输入错误账号",
          "details": {
            "command": "type",
            "selector": "input[type='text']",
            "text": "wrong_user"
          },
          "expected_result": {
            "ui": "账号输入框显示'wrong_user'"
          }
        },
        {
          "step": 2,
          "action": "输入有效密码",
          "details": {
            "command": "type",
            "selector": "input[type='password']",
            "text": "admin123"
          },
          "expected_result": {
            "ui": "密码输入框显示加密字符"
          }
        },
        {
          "step": 3,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": ".el-button.el-button--primary",
            "wait_for": 3000
          },
          "expected_result": {
            "ux": "登录按钮进入loading状态或禁用状态"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "错误提示",
            "check": "显示账号或密码错误提示",
            "type": "text_visible",
            "expected_pattern": "账号|密码|错误|不存在"
          },
          {
            "element": "Toast或Alert",
            "check": "显示错误提示消息",
            "type": "toast_or_alert_visible"
          }
        ],
        "ux_layer": [
          {
            "check": "未跳转到其他页面",
            "type": "url_unchanged"
          },
          {
            "check": "显示loading状态后恢复",
            "type": "loading_state_transition"
          },
          {
            "check": "登录按钮恢复可点击状态",
            "type": "button_enabled_after_loading"
          }
        ],
        "network_layer": [
          {
            "check": "登录API请求返回401或400状态码",
            "type": "network_response_code",
            "expected": "401 or 400"
          }
        ]
      }
    },
    {
      "case_id": "TC005",
      "name": "错误密码登录测试",
      "priority": "MEDIUM",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "输入有效账号",
          "details": {
            "command": "type",
            "selector": "input[type='text']",
            "text": "admin"
          },
          "expected_result": {
            "ui": "账号输入框显示'admin'"
          }
        },
        {
          "step": 2,
          "action": "输入错误密码",
          "details": {
            "command": "type",
            "selector": "input[type='password']",
            "text": "wrong_password"
          },
          "expected_result": {
            "ui": "密码输入框显示加密字符"
          }
        },
        {
          "step": 3,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": ".el-button.el-button--primary",
            "wait_for": 3000
          },
          "expected_result": {
            "ux": "登录按钮进入loading状态或禁用状态"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "错误提示",
            "check": "显示账号或密码错误提示",
            "type": "text_visible",
            "expected_pattern": "账号|密码|错误"
          },
          {
            "element": "Toast或Alert",
            "check": "显示错误提示消息",
            "type": "toast_or_alert_visible"
          }
        ],
        "ux_layer": [
          {
            "check": "未跳转到其他页面",
            "type": "url_unchanged"
          },
          {
            "check": "显示loading状态后恢复",
            "type": "loading_state_transition"
          },
          {
            "check": "登录按钮恢复可点击状态",
            "type": "button_enabled_after_loading"
          }
        ],
        "network_layer": [
          {
            "check": "登录API请求返回401或400状态码",
            "type": "network_response_code",
            "expected": "401 or 400"
          }
        ]
      }
    },
    {
      "case_id": "TC006",
      "name": "正确凭证登录及登出测试",
      "priority": "CRITICAL",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "刷新页面",
          "details": {
            "command": "reload"
          },
          "expected_result": {
            "ui": "页面重新加载"
          }
        },
        {
          "step": 2,
          "action": "清除预填账号密码",
          "details": {
            "command": "clear",
            "selectors": [
              {"selector": "input[type='text']"},
              {"selector": "input[type='password']"}
            ]
          },
          "expected_result": {
            "ui": "账号和密码输入框均为空"
          }
        },
        {
          "step": 3,
          "action": "输入有效账号",
          "details": {
            "command": "type",
            "selector": "input[type='text']",
            "text": "admin"
          },
          "expected_result": {
            "ui": "账号输入框显示'admin'"
          }
        },
        {
          "step": 4,
          "action": "输入有效密码",
          "details": {
            "command": "type",
            "selector": "input[type='password']",
            "text": "admin123"
          },
          "expected_result": {
            "ui": "密码输入框显示加密字符"
          }
        },
        {
          "step": 5,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": ".el-button.el-button--primary"
          },
          "expected_result": {
            "ux": "登录按钮进入loading状态或禁用状态"
          }
        },
        {
          "step": 6,
          "action": "等待页面跳转",
          "details": {
            "command": "wait_for_navigation",
            "timeout": 5000
          },
          "expected_result": {
            "ux": "页面跳转到首页或仪表盘"
          }
        },
        {
          "step": 7,
          "action": "验证登录成功",
          "details": {
            "command": "verify_url",
            "expected_pattern": "/index|#/?$|/dashboard"
          },
          "expected_result": {
            "ux": "URL发生变化，不再包含/login"
          }
        },
        {
          "step": 8,
          "action": "查找登出按钮",
          "details": {
            "command": "locate_element",
            "selectors": [
              ".el-dropdown-menu__item:has-text('退出')",
              "a:has-text('退出')",
              "button:has-text('退出')"
            ]
          },
          "expected_result": {
            "ui": "找到登出按钮"
          }
        },
        {
          "step": 9,
          "action": "执行登出操作",
          "details": {
            "command": "click",
            "selector": ".el-dropdown-menu__item:has-text('退出'), a:has-text('退出'), button:has-text('退出')"
          },
          "expected_result": {
            "ux": "弹窗确认或直接登出"
          }
        },
        {
          "step": 10,
          "action": "等待返回登录页",
          "details": {
            "command": "wait_for_navigation",
            "timeout": 5000
          },
          "expected_result": {
            "ux": "返回到登录页面"
          }
        },
        {
          "step": 11,
          "action": "验证返回登录页",
          "details": {
            "command": "verify_url",
            "expected_pattern": "/login"
          },
          "expected_result": {
            "ux": "URL包含/login"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "登录成功提示",
            "check": "显示登录成功提示消息",
            "type": "toast_or_alert_visible"
          },
          {
            "element": "首页元素",
            "check": "首页或仪表盘元素可见",
            "type": "element_visible"
          }
        ],
        "ux_layer": [
          {
            "check": "页面成功跳转到首页",
            "type": "url_changed"
          },
          {
            "check": "登录按钮状态变化",
            "type": "loading_state_transition"
          },
          {
            "check": "登出后返回登录页",
            "type": "url_contains",
            "expected": "/login"
          }
        ],
        "network_layer": [
          {
            "check": "登录API请求返回200状态码",
            "type": "network_response_code",
            "expected": "200"
          },
          {
            "check": "登出API请求成功",
            "type": "network_response_code",
            "expected": "200"
          }
        ]
      }
    }
  ],
  "execution_order": ["TC001", "TC002", "TC003", "TC004", "TC005", "TC006"],
  "notes": [
    "所有测试用例执行前必须先刷新页面并清除预填账号密码",
    "测试过程必须可见（headless=false）",
    "使用三位一体验证方法：UI层、UX层、Network层",
    "TC006为正确凭证测试，必须最后执行并完成登出操作",
    "所有测试仅在PC端执行"
  ]
}