# 自动化后端接口安全测试报告

> **生成时间**: 2026-01-04 22:11:14
> **目标系统**: http://192.168.236.128
> **检测引擎**: AI-DevSecOps-Bot 

---

## 1. 测试概览 (Executive Summary)

| 核心指标 | 数值 | 说明 |
| :--- | :--- | :--- |
| **接口总数** | 118 | 扫描到的 API 数量 |
| **执行用例** | 42 | 实际发起的测试请求总数 |
| **通过率** | **54%** | 符合预期的测试比例 |
| **高危漏洞** | **0** | **鉴权绕过 (越权) 数量** |
| **系统崩溃** | 12 | 业务返回 Code 500 的数量 |
| **网络错误** | 0 | HTTP 层非 200 的数量 |

---

## 2. 测试用例统计概览

| 测试类型 | 总数 | 通过数 | 失败数 | 通过率 |
| :--- | :--- | :--- | :--- | :--- |
| 基准测试 | 42 | 23 | 19 | 54% |
| 越权测试 | 0 | 0 | 0 | 0% |
| 健壮性测试 | 0 | 0 | 0 | 0% |
| 边界值测试 | 0 | 0 | 0 | 0% |
| **总计** | **42** | **23** | **19** | **54%** |

---

## 3. 详细测试结果

### 3.1 通过用例概况

成功请求: 23 次 (HTTP 200 且业务码正常)  
鉴权通过: 23 次 (带认证请求正常返回)  
异常请求处理正常: 0 次 (异常输入被正确处理)  
无权限验证正确: 0 次 (无认证请求正确返回401/403)  

#### 3.1.1 基准测试通过接口详情

| 接口路径 (URL) | 方法 | 测试类型 | Payload (复现参数) | 实际业务码 | 服务端提示 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| /monitor/operlog/export | POST | basic_auth | *** | 200 | Binary response |
| /system/config/export | POST | basic_auth | *** | 200 | Binary response |
| /system/dict/data/export | POST | basic_auth | *** | 200 | Binary response |
| /system/dict/type/export | POST | basic_auth | *** | 200 | Binary response |
| /system/post/export | POST | basic_auth | *** | 200 | Binary response |
| /system/role/export | POST | basic_auth | *** | 200 | Binary response |
| /system/user/export | POST | basic_auth | *** | 200 | Binary response |
| /monitor/job/export | POST | basic_auth | *** | 200 | Binary response |
| /monitor/jobLog/export | POST | basic_auth | *** | 200 | Binary response |
| /monitor/cache/getNames | GET | basic_auth | *** | 200 | 操作成功 |
| /monitor/cache/getKeys/{cacheName} | GET | basic_auth | *** | 200 | 操作成功 |
| /monitor/cache/getValue/{cacheName}/{cacheKey} | GET | basic_auth | *** | 200 | 操作成功 |
| /monitor/logininfor/unlock/{userName} | GET | basic_auth | *** | 200 | 操作成功 |
| /system/dict/type/optionselect | GET | basic_auth | *** | 200 | 操作成功 |
| /getInfo | GET | basic_auth | *** | 200 | 操作成功 |
| /getRouters | GET | basic_auth | *** | 200 | 操作成功 |
| /system/menu/treeselect | GET | basic_auth | *** | 200 | 操作成功 |
| /system/post/optionselect | GET | basic_auth | *** | 200 | 操作成功 |
| /system/role/optionselect | GET | basic_auth | *** | 200 | 操作成功 |
| /system/role/authUser/allocatedList | GET | basic_auth | *** | 200 | 操作成功 |
| /system/role/authUser/unallocatedList | GET | basic_auth | *** | 200 | 操作成功 |
| /system/user/deptTree | GET | basic_auth | *** | 200 | 操作成功 |
| /tool/gen/batchGenCode | GET | basic_auth | *** | 200 | 操作成功 |

#### 3.1.2 越权测试通过接口详情描述

无越权测试通过记录

#### 3.1.3 健壮测试通过接口详情描述

无健壮性测试通过记录

#### 3.1.4 边界值测试通过接口详情描述

无边界值测试通过记录

### 3.2 失败用例与失败描述

#### 3.2.1 高风险接口详情

未发现高风险接口（未执行鉴权绕过测试）

#### 3.2.2 系统健壮性问题

风险定义: 特殊输入导致服务端抛出异常 (Code 500)，可能暴露堆栈信息。

| 接口路径 (URL) | 方法 | 测试类型 | Payload (复现参数) | 实际业务码 | 服务端提示 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| /system/user/profile/updatePwd | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /system/role/dataScope | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /system/role/changeStatus | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /system/role/authUser/cancel | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /system/role/authUser/cancelAll | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /system/role/authUser/selectAll | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /system/user/resetPwd | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /system/user/changeStatus | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /system/user/authRole | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /test/user/save | POST | basic_auth | *** | 500 | 用户ID不能为空 |
| /test/user/update | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /tool/gen/createTable | POST | basic_auth | *** | 500 | 创建表结构异常 |
| /monitor/job/changeStatus | POST | basic_auth | *** | 500 | Request method 'POST' not supported |
| /monitor/job/run | POST | basic_auth | *** | 500 | Request method 'POST' not supported |

#### 3.2.3 其他失败用例

| 接口路径 (URL) | 方法 | 测试类型 | 预期结果 | 实际结果 | 失败描述 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| /system/user/authRole/{userId} | GET | basic_auth | 成功返回用户角色信息 | 失败 | 参数类型不匹配，参数[userId]需要为类型'java.lang.Long'，参数值取值'{userId}' |
| /test/user/{userId} | GET | basic_auth | 成功返回用户信息 | 失败 | 参数类型不匹配，参数[userId]需要为类型'java.lang.Integer'，参数值取值'{userId}' |
| /tool/gen/preview/{tableId} | GET | basic_auth | 成功返回预览信息 | 失败 | 系统预览异常，无法生成预览代码文件 |
| /tool/gen/synchDb/{tableName} | GET | basic_auth | 成功同步数据库 | 失败 | Cannot invoke "com.ruoyi.generator.domain.GenTable.getColumns()" because "table" is null |

---

## 4. 安全结论与建议

### 4.1 鉴权逻辑分析

* **预期行为**: 未登录访问应返回 `Code: 401`, Msg: `"认证失败"`。  
* **实际发现**: 未执行鉴权绕过测试，无法评估鉴权安全性。  

### 4.2 修复建议

1. **API 方法映射**: 部分接口实际使用 PUT 方法，但静态分析识别为 POST，建议优化 API 提取逻辑，正确识别 @PutMapping 注解。
   
2. **参数类型验证**: 路径参数接口（如 /system/user/authRole/{userId}）缺少实际参数值，建议在测试前动态获取有效的参数值。

3. **异常处理优化**: 对 500 错误接口增加全局异常处理 (GlobalExceptionHandler)，避免堆栈信息外露。

4. **业务参数校验**: /test/user/save 接口提示"用户ID不能为空"，但测试脚本已清空 ID 字段，建议检查后端业务逻辑。

5. **文件对象空指针**: /tool/gen/synchDb/{tableName} 接口提示 table 对象为 null，需检查传入参数的完整性和有效性。

### 4.3 测试执行总结

本次测试完成了：
- ✅ 成功提取 23 个真实数据模板作为"黄金模板"
- ✅ 实现载荷清洗与唯一化处理机制
- ✅ 实现增删闭环测试流程
- ✅ 实现管理员保护机制
- ✅ 实现自适应请求与响应处理
- ✅ 生成完整的测试结果报告

测试覆盖率：54%（23/42 通过）

**注意**: 本次测试仅完成了基准性测试，后续建议执行鉴权绕过测试、健壮性测试和边界值测试以获得更全面的安全性评估。

---

## 附录：测试环境信息

| 配置项 | 值 |
| :--- | :--- |
| 目标系统 | http://192.168.236.128 |
| 后端语言 | Java |
| 框架 | Spring Boot |
| 源码路径 | D:\desktop\AI Coding\RuoYi-Vue |
| 认证方式 | JWT Token |
| 测试时间 | 2026-01-04 22:11:14 |