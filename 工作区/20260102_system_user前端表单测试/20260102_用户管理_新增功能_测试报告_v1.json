{
  "report_info": {
    "function": "用户管理-新增功能测试",
    "test_date": "2026-01-02",
    "test_url": "http://192.168.142.146/system/user",
    "report_version": "v1",
    "executor": "AI Auto-Test System"
  },
  "test_summary": {
    "total_cases": 12,
    "passed": 0,
    "failed": 12,
    "blocked": 0,
    "pass_rate": "0%"
  },
  "test_results": [
    {
      "case_id": "TC_ADD_001",
      "title": "正常新增用户-填写所有必填字段",
      "status": "FAILED",
      "priority": "high",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败 - placeholder匹配中文编码问题",
      "root_cause": "Playwright在处理中文字符选择器时存在编码兼容性问题，导致filter和placeholder匹配失败",
      "fix_suggestion": "需要使用纯CSS选择器替代文本筛选，或通过元素索引直接定位输入框"
    },
    {
      "case_id": "TC_ADD_002",
      "title": "正常新增用户-填写所有字段",
      "status": "FAILED",
      "priority": "medium",
      "error_type": "元素定位超时",
      "error_message": "对话框定位后输入框填充失败",
      "root_cause": "同TC_ADD_001，元素选择器编码问题",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_003",
      "title": "异常测试-用户昵称为空",
      "status": "FAILED",
      "priority": "high",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_004",
      "title": "异常测试-用户名称为空",
      "status": "FAILED",
      "priority": "high",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_005",
      "title": "异常测试-用户密码为空",
      "status": "FAILED",
      "priority": "high",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_006",
      "title": "边界测试-用户名称少于2字符",
      "status": "FAILED",
      "priority": "medium",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_007",
      "title": "边界测试-用户名称超过20字符",
      "status": "FAILED",
      "priority": "medium",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_008",
      "title": "边界测试-用户密码少于5字符",
      "status": "FAILED",
      "priority": "medium",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_009",
      "title": "异常测试-用户密码包含非法字符",
      "status": "FAILED",
      "priority": "medium",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_010",
      "title": "异常测试-手机号码格式错误",
      "status": "FAILED",
      "priority": "low",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_011",
      "title": "异常测试-邮箱格式错误",
      "status": "FAILED",
      "priority": "low",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    },
    {
      "case_id": "TC_ADD_012",
      "title": "正常用户-取消按钮功能",
      "status": "FAILED",
      "priority": "low",
      "error_type": "元素定位超时",
      "error_message": "对话框输入框定位失败",
      "root_cause": "同TC_ADD_001",
      "fix_suggestion": "需要优化选择器策略"
    }
  ],
  "environment": {
    "browser": "Chromium (Playwright)",
    "browser_mode": "Headed Mode (有头模式)",
    "test_framework": "pytest + pytest-playwright",
    "base_url": "http://192.168.142.146",
    "test_account": "admin",
    "os": "Windows 11"
  },
  "issues_found": [
    {
      "severity": "CRITICAL",
      "issue": "Playwright中文选择器编码问题",
      "description": "在Windows系统的cmd环境中，Playwright处理包含中文字符的placeholder、has_text等选择器时存在编码不兼容问题",
      "affected_cases": ["TC_ADD_001 - TC_ADD_012"],
      "recommendation": "使用纯CSS索引选择器（如nth(n)）或通过其他属性定位，避免使用中文文本匹配"
    },
    {
      "severity": "HIGH",
      "issue": "对话框可见性验证失败",
      "description": "Element UI对话框可能有多个隐藏实例，导致.to_be_visible()断言失败",
      "affected_cases": ["TC_ADD_001 - TC_ADD_012"],
      "recommendation": "使用.wait_for_timeout()替代显式可见性等待，或定位对话框内的直接子元素"
    }
  ],
  "next_steps": [
    "优化测试脚本选择器策略，使用纯CSS选择器避免中文字符",
    "使用元素索引或HTML属性定位，替代文本匹配",
    "增加更智能的元素查找和重试机制",
    "在稳定环境中重新运行所有测试用例"
  ],
  "script_status": "测试脚本已生成并优化，但存在元素定位兼容性问题",
  "quality_risk": "由于12个测试用例全部失败，当前用户管理新增功能的测试覆盖率为0%，存在未知质量风险"
}