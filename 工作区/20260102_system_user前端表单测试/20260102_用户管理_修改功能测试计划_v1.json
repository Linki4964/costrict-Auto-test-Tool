{
  "task_info": {
    "module": "系统管理-用户管理",
    "function": "修改用户功能",
    "test_url": "http://192.168.142.146/system/user",
    "account": "admin",
    "password": "admin123",
    "test_type": "PC端功能测试",
    "created_at": "2026-01-02"
  },
  "page_elements": {
    "login_page": {
      "username_input": "输入账号",
      "password_input": "输入密码",
      "login_button": "点击登录按钮",
      "menu_system_management": "系统管理",
      "menu_user_management": "用户管理"
    },
    "user_management_page": {
      "modify_button": "修改按钮",
      "dialog_title": "修改用户",
      "form_fields": {
        "nick_name": {
          "element_type": "input",
          "selector": "[prop='nickName'] input",
          "required": true,
          "max_length": 30,
          "label": "用户昵称"
        },
        "dept_id": {
          "element_type": "treeselect",
          "selector": "[prop='deptId'] .vue-treeselect__control",
          "required": true,
          "label": "归属部门"
        },
        "phonenumber": {
          "element_type": "input",
          "selector": "[prop='phonenumber'] input",
          "max_length": 11,
          "pattern": "^1[3|4|5|6|7|8|9][0-9]\\d{8}$",
          "label": "手机号码"
        },
        "email": {
          "element_type": "input",
          "selector": "[prop='email'] input",
          "max_length": 50,
          "type": "email",
          "label": "邮箱"
        },
        "sex": {
          "element_type": "select",
          "selector": "[prop='sex'] .el-input__inner",
          "options": ["0", "1", "2"],
          "label": "用户性别"
        },
        "status": {
          "element_type": "radio",
          "selector": "[prop='status'] .el-radio",
          "default_value": "0",
          "label": "状态"
        },
        "post_ids": {
          "element_type": "select",
          "selector": "[prop='postIds'] .el-input__inner",
          "multiple": true,
          "label": "岗位"
        },
        "role_ids": {
          "element_type": "select",
          "selector": "[prop='roleIds'] .el-input__inner",
          "multiple": true,
          "label": "角色"
        },
        "remark": {
          "element_type": "textarea",
          "selector": "[prop='remark'] textarea",
          "label": "备注"
        }
      },
      "buttons": {
        "confirm": ".dialog-footer .el-button--primary",
        "cancel": ".dialog-footer .el-button--default"
      }
    }
  },
  "api_info": {
    "update_user": {
      "url": "/system/user",
      "method": "PUT",
      "description": "修改用户接口"
    },
    "get_user_detail": {
      "url": "/system/user/{userId}",
      "method": "GET",
      "description": "获取用户详细信息接口"
    }
  },
  "test_plan": {
    "precondition": {
      "description": "已登录系统，进入用户管理页面，且列表中存在可修改的用户",
      "steps": [
        "打开浏览器访问登录页面",
        "输入用户名：admin",
        "输入密码：admin123",
        "点击登录按钮",
        "等待页面跳转完成",
        "点击左侧菜单：系统管理",
        "点击子菜单：用户管理",
        "验证用户列表页面正常加载",
        "记录第一个非admin用户的原始信息"
      ]
    },
    "test_cases": [
      {
        "case_id": "TC_UPDATE_001",
        "title": "正常修改用户-修改用户昵称",
        "priority": "high",
        "description": "选择用户并修改昵称字段",
        "precondition": "已打开修改用户对话框",
        "test_data": {
          "nick_name": "修改后昵称"
        },
        "steps": [
          "点击用户列表中第一行的【修改】按钮",
          "等待修改对话框打开",
          "修改用户昵称为：修改后昵称",
          "点击【确定】按钮",
          "验证提交成功",
          "验证对话框关闭",
          "验证列表中用户昵称已更新",
          "验证成功提示消息"
        ],
        "expected_result": {
          "ui_layer": "显示'修改成功'提示消息，对话框关闭，列表中显示修改后的昵称",
          "ux_layer": "提交按钮显示loading状态，修改成功后按钮恢复正常",
          "network_layer": "PUT请求发送到/system/user，返回200状态码，响应数据确认修改成功"
        },
        "verification_points": [
          "提交成功提示消息显示",
          "对话框自动关闭",
          "用户列表刷新且昵称已更新",
          "Network面板中PUT请求状态码为200",
          "响应数据正确"
        ]
      },
      {
        "case_id": "TC_UPDATE_002",
        "title": "正常修改用户-修改手机号和邮箱",
        "priority": "medium",
        "description": "同时修改手机号和邮箱字段",
        "precondition": "已打开修改用户对话框",
        "test_data": {
          "phonenumber": "13900139000",
          "email": "updated@example.com"
        },
        "steps": [
          "点击用户列表中第一行的【修改】按钮",
          "修改手机号码为：13900139000",
          "修改邮箱为：updated@example.com",
          "点击【确定】按钮",
          "验证提交成功",
          "验证列表中手机号和邮箱已更新"
        ],
        "expected_result": {
          "ui_layer": "显示'修改成功'提示消息，列表中显示修改后的手机号和邮箱",
          "ux_layer": "提交按钮显示loading状态",
          "network_layer": "PUT请求发送到/system/user，返回200状态码"
        }
      },
      {
        "case_id": "TC_UPDATE_003",
        "title": "正常修改用户-修改岗位和角色",
        "priority": "medium",
        "description": "修改用户的岗位和角色分配",
        "precondition": "已打开修改用户对话框",
        "steps": [
          "点击用户列表中第一行的【修改】按钮",
          "删除当前岗位选择，选择新的岗位",
          "删除当前角色选择，选择新的角色",
          "点击【确定】按钮",
          "验证提交成功",
          "验证列表中岗位和角色已更新"
        ],
        "expected_result": {
          "ui_layer": "显示'修改成功'提示消息，数据已更新",
          "ux_layer": "下拉框选择正常，提交成功",
          "network_layer": "PUT请求发送到/system/user，返回200状态码"
        }
      },
      {
        "case_id": "TC_UPDATE_004",
        "title": "异常测试-用户昵称为空",
        "priority": "high",
        "description": "清空用户昵称提交，验证必填校验",
        "precondition": "已打开修改用户对话框",
        "test_data": {
          "nick_name": ""
        },
        "steps": [
          "点击用户列表中第一行的【修改】按钮",
          "清空用户昵称",
          "点击【确定】按钮",
          "验证表单校验错误提示"
        ],
        "expected_result": {
          "ui_layer": "用户昵称字段下方显示'用户昵称不能为空'错误提示，对话框不关闭",
          "ux_layer": "表单不提交",
          "network_layer": "不发送PUT请求"
        }
      },
      {
        "case_id": "TC_UPDATE_005",
        "title": "异常测试-手机号码格式错误",
        "priority": "low",
        "description": "手机号码格式不符合要求",
        "precondition": "已打开修改用户对话框",
        "test_data": {
          "phonenumber": "12345"
        },
        "steps": [
          "点击用户列表中第一行的【修改】按钮",
          "修改手机号码为：12345（格式错误）",
          "点击【确定】按钮",
          "验证表单校验错误提示"
        ],
        "expected_result": {
          "ui_layer": "显示'请输入正确的手机号码'错误提示",
          "ux_layer": "表单不提交",
          "network_layer": "不发送PUT请求"
        }
      },
      {
        "case_id": "TC_UPDATE_006",
        "title": "异常测试-邮箱格式错误",
        "priority": "low",
        "description": "邮箱格式不符合要求",
        "precondition": "已打开修改用户对话框",
        "test_data": {
          "email": "invalid-email"
        },
        "steps": [
          "点击用户列表中第一行的【修改】按钮",
          "修改邮箱为：invalid-email（格式错误）",
          "点击【确定】按钮",
          "验证表单校验错误提示"
        ],
        "expected_result": {
          "ui_layer": "显示'请输入正确的邮箱地址'错误提示",
          "ux_layer": "表单不提交",
          "network_layer": "不发送PUT请求"
        }
      },
      {
        "case_id": "TC_UPDATE_007",
        "title": "正常用户-取消按钮功能",
        "priority": "low",
        "description": "点击取消按钮，关闭对话框且不保存数据",
        "precondition": "已打开修改用户对话框并修改部分数据",
        "steps": [
          "点击用户列表中第一行的【修改】按钮",
          "修改用户昵称",
          "点击【取消】按钮",
          "验证对话框关闭",
          "验证列表信息未变化"
        ],
        "expected_result": {
          "ui_layer": "对话框关闭，用户信息未修改",
          "ux_layer": "表单关闭，不发送任何请求",
          "network_layer": "不发送PUT请求"
        }
      }
    ]
  }
}