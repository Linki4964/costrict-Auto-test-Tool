{
  "metadata": {
    "version": "1.0",
    "created_date": "2025-12-30",
    "test_type": "functional_test",
    "platform": "PC",
    "target_url": "http://192.168.142.146/login?",
    "test_scope": "登录界面功能测试"
  },
  "test_environment": {
    "browser": "Chrome",
    "headless": false,
    "timeout": 30,
    "valid_credentials": {
      "username": "admin",
      "password": "admin123"
    }
  },
  "test_cases": [
    {
      "case_id": "TC001",
      "name": "页面初始化验证",
      "priority": "HIGH",
      "precondition": {
        "state": "未登录状态",
        "cleanup_required": true
      },
      "steps": [
        {
          "step": 1,
          "action": "导航至登录页面",
          "details": {
            "command": "goto",
            "url": "http://192.168.142.146/login?"
          },
          "expected_result": {
            "ui": "登录页面完全加载",
            "network": "页面响应200"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "登录页面标题",
            "check": "页面标题可见",
            "type": "visibility"
          },
          {
            "element": "username输入框",
            "check": "输入框可见且可交互",
            "type": "visibility_and_interactable"
          },
          {
            "element": "password输入框",
            "check": "输入框可见且可交互",
            "type": "visibility_and_interactable"
          },
          {
            "element": "登录按钮",
            "check": "按钮可见且可点击",
            "type": "visibility_and_enabled"
          }
        ],
        "ux_layer": [
          {
            "check": "页面加载完成，无长时间loading",
            "type": "loading_state"
          }
        ]
      }
    },
    {
      "case_id": "TC002",
      "name": "清除预填信息验证",
      "priority": "HIGH",
      "precondition": {
        "state": "登录页面已加载"
      },
      "steps": [
        {
          "step": 1,
          "action": "刷新页面",
          "details": {
            "command": "reload"
          },
          "expected_result": {
            "ui": "页面重新加载"
          }
        },
        {
          "step": 2,
          "action": "等待页面加载完成",
          "details": {
            "command": "wait_for_load_state",
            "state": "networkidle"
          },
          "expected_result": {
            "ux": "页面完全加载"
          }
        },
        {
          "step": 3,
          "action": "清除username输入框",
          "details": {
            "command": "clear",
            "selector": "input[type='text'], input[name='username'], input[placeholder*='用户名'], input[placeholder*='账号']"
          },
          "expected_result": {
            "ui": "username输入框为空"
          }
        },
        {
          "step": 4,
          "action": "清除password输入框",
          "details": {
            "command": "clear",
            "selector": "input[type='password'], input[name='password'], input[placeholder*='密码']"
          },
          "expected_result": {
            "ui": "password输入框为空"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "username输入框",
            "check": "值为空",
            "type": "value_equals",
            "expected": ""
          },
          {
            "element": "password输入框",
            "check": "值为空",
            "type": "value_equals",
            "expected": ""
          }
        ]
      }
    },
    {
      "case_id": "TC003",
      "name": "空用户名登录测试",
      "priority": "MEDIUM",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "输入空用户名",
          "details": {
            "command": "type",
            "selector": "input[type='text'], input[name='username'], input[placeholder*='用户名'], input[placeholder*='账号']",
            "text": ""
          },
          "expected_result": {
            "ui": "username输入框为空"
          }
        },
        {
          "step": 2,
          "action": "输入有效密码",
          "details": {
            "command": "type",
            "selector": "input[type='password'], input[name='password'], input[placeholder*='密码']",
            "text": "admin123"
          },
          "expected_result": {
            "ui": "password输入框显示加密字符"
          }
        },
        {
          "step": 3,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": "button[type='submit'], button:has-text('登录'), .login-btn"
          },
          "expected_result": {
            "ux": "登录按钮可点击"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "错误提示",
            "check": "显示'用户名不能为空'或类似提示",
            "type": "text_visible",
            "expected_pattern": "用户名|账号|不能为空|请输入"
          }
        ],
        "ux_layer": [
          {
            "check": "未跳转到其他页面",
            "type": "url_unchanged"
          },
          {
            "check": "登录按钮保持可点击状态",
            "type": "button_enabled"
          }
        ],
        "network_layer": [
          {
            "check": "无登录API请求或请求返回失败",
            "type": "network_status",
            "expected": "400 or 401 or no_request"
          }
        ]
      }
    },
    {
      "case_id": "TC004",
      "name": "空密码登录测试",
      "priority": "MEDIUM",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "输入有效用户名",
          "details": {
            "command": "type",
            "selector": "input[type='text'], input[name='username'], input[placeholder*='用户名'], input[placeholder*='账号']",
            "text": "admin"
          },
          "expected_result": {
            "ui": "username输入框显示'admin'"
          }
        },
        {
          "step": 2,
          "action": "输入空密码",
          "details": {
            "command": "type",
            "selector": "input[type='password'], input[name='password'], input[placeholder*='密码']",
            "text": ""
          },
          "expected_result": {
            "ui": "password输入框为空"
          }
        },
        {
          "step": 3,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": "button[type='submit'], button:has-text('登录'), .login-btn"
          },
          "expected_result": {
            "ux": "登录按钮可点击"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "错误提示",
            "check": "显示'密码不能为空'或类似提示",
            "type": "text_visible",
            "expected_pattern": "密码|不能为空|请输入"
          }
        ],
        "ux_layer": [
          {
            "check": "未跳转到其他页面",
            "type": "url_unchanged"
          }
        ],
        "network_layer": [
          {
            "check": "无登录API请求或请求返回失败",
            "type": "network_status",
            "expected": "400 or 401 or no_request"
          }
        ]
      }
    },
    {
      "case_id": "TC005",
      "name": "错误用户名测试",
      "priority": "MEDIUM",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "输入错误用户名",
          "details": {
            "command": "type",
            "selector": "input[type='text'], input[name='username'], input[placeholder*='用户名'], input[placeholder*='账号']",
            "text": "wrong_user"
          },
          "expected_result": {
            "ui": "username输入框显示'wrong_user'"
          }
        },
        {
          "step": 2,
          "action": "输入有效密码",
          "details": {
            "command": "type",
            "selector": "input[type='password'], input[name='password'], input[placeholder*='密码']",
            "text": "admin123"
          },
          "expected_result": {
            "ui": "password输入框显示加密字符"
          }
        },
        {
          "step": 3,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": "button[type='submit'], button:has-text('登录'), .login-btn"
          },
          "expected_result": {
            "ux": "登录按钮进入loading状态或禁用状态"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "错误提示",
            "check": "显示'用户名或密码错误'或类似提示",
            "type": "text_visible",
            "expected_pattern": "用户名|密码|错误|不存在"
          },
          {
            "element": "Toast或Alert",
            "check": "显示错误提示消息",
            "type": "toast_or_alert_visible"
          }
        ],
        "ux_layer": [
          {
            "check": "未跳转到其他页面",
            "type": "url_unchanged"
          },
          {
            "check": "显示loading状态后恢复",
            "type": "loading_state_transition"
          },
          {
            "check": "登录按钮恢复可点击状态",
            "type": "button_enabled_after_loading"
          }
        ],
        "network_layer": [
          {
            "check": "登录API请求返回401或400状态码",
            "type": "network_response_code",
            "expected": "401 or 400"
          }
        ]
      }
    },
    {
      "case_id": "TC006",
      "name": "错误密码测试",
      "priority": "MEDIUM",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "输入有效用户名",
          "details": {
            "command": "type",
            "selector": "input[type='text'], input[name='username'], input[placeholder*='用户名'], input[placeholder*='账号']",
            "text": "admin"
          },
          "expected_result": {
            "ui": "username输入框显示'admin'"
          }
        },
        {
          "step": 2,
          "action": "输入错误密码",
          "details": {
            "command": "type",
            "selector": "input[type='password'], input[name='password'], input[placeholder*='密码']",
            "text": "wrong_password"
          },
          "expected_result": {
            "ui": "password输入框显示加密字符"
          }
        },
        {
          "step": 3,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": "button[type='submit'], button:has-text('登录'), .login-btn"
          },
          "expected_result": {
            "ux": "登录按钮进入loading状态或禁用状态"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "错误提示",
            "check": "显示'用户名或密码错误'或类似提示",
            "type": "text_visible",
            "expected_pattern": "用户名|密码|错误"
          },
          {
            "element": "Toast或Alert",
            "check": "显示错误提示消息",
            "type": "toast_or_alert_visible"
          }
        ],
        "ux_layer": [
          {
            "check": "未跳转到其他页面",
            "type": "url_unchanged"
          },
          {
            "check": "显示loading状态后恢复",
            "type": "loading_state_transition"
          },
          {
            "check": "登录按钮恢复可点击状态",
            "type": "button_enabled_after_loading"
          }
        ],
        "network_layer": [
          {
            "check": "登录API请求返回401或400状态码",
            "type": "network_response_code",
            "expected": "401 or 400"
          }
        ]
      }
    },
    {
      "case_id": "TC007",
      "name": "正确凭证登录测试",
      "priority": "CRITICAL",
      "precondition": {
        "state": "登录页面已加载，输入框已清空"
      },
      "steps": [
        {
          "step": 1,
          "action": "输入有效用户名",
          "details": {
            "command": "type",
            "selector": "input[type='text'], input[name='username'], input[placeholder*='用户名'], input[placeholder*='账号']",
            "text": "admin"
          },
          "expected_result": {
            "ui": "username输入框显示'admin'"
          }
        },
        {
          "step": 2,
          "action": "输入有效密码",
          "details": {
            "command": "type",
            "selector": "input[type='password'], input[name='password'], input[placeholder*='密码']",
            "text": "admin123"
          },
          "expected_result": {
            "ui": "password输入框显示加密字符"
          }
        },
        {
          "step": 3,
          "action": "点击登录按钮",
          "details": {
            "command": "click",
            "selector": "button[type='submit'], button:has-text('登录'), .login-btn"
          },
          "expected_result": {
            "ux": "登录按钮进入loading状态或禁用状态"
          }
        },
        {
          "step": 4,
          "action": "等待页面跳转",
          "details": {
            "command": "wait_for_navigation",
            "timeout": 5000
          },
          "expected_result": {
            "ux": "页面跳转到首页或仪表盘"
          }
        },
        {
          "step": 5,
          "action": "执行登出操作",
          "details": {
            "command": "click",
            "selector": ".user-dropdown, [class*='user'], [class*='avatar']:visible, button:has-text('退出'), a:has-text('退出')"
          },
          "expected_result": {
            "ux": "用户菜单打开或直接登出"
          }
        },
        {
          "step": 6,
          "action": "确认登出",
          "details": {
            "command": "click",
            "selector": "button:has-text('确定'), button:has-text('退出'), a:has-text('退出登录')"
          },
          "expected_result": {
            "ux": "跳转回登录页面"
          }
        }
      ],
      "verifications": {
        "ui_layer": [
          {
            "element": "登录成功提示",
            "check": "显示'登录成功'或类似提示",
            "type": "text_visible",
            "expected_pattern": "成功|欢迎"
          },
          {
            "element": "首页元素",
            "check": "首页关键元素可见",
            "type": "element_visible",
            "selectors": "[class*='dashboard'], [class*='home'], [class*='index']"
          }
        ],
        "ux_layer": [
          {
            "check": "页面跳转到首页或仪表盘",
            "type": "url_changed",
            "expected_pattern": "index|home|dashboard"
          },
          {
            "check": "loading状态完整展示",
            "type": "loading_state_transition"
          },
          {
            "check": "登出后返回登录页面",
            "type": "url_contains",
            "expected": "login"
          }
        ],
        "network_layer": [
          {
            "check": "登录API请求返回200状态码",
            "type": "network_response_code",
            "expected": "200"
          },
          {
            "check": "后续页面资源加载成功",
            "type": "network_requests_success"
          }
        ]
      }
    }
  ],
  "cleanup_strategy": {
    "before_each_case": {
      "actions": [
        {
          "action": "刷新页面",
          "command": "reload"
        },
        {
          "action": "等待加载完成",
          "command": "wait_for_load_state",
          "param": "networkidle"
        },
        {
          "action": "清除username输入框",
          "command": "clear",
          "selector": "input[type='text'], input[name='username'], input[placeholder*='用户名'], input[placeholder*='账号']"
        },
        {
          "action": "清除password输入框",
          "command": "clear",
          "selector": "input[type='password'], input[name='password'], input[placeholder*='密码']"
        }
      ]
    },
    "after_all_cases": {
      "actions": [
        {
          "action": "关闭浏览器",
          "command": "close"
        }
      ]
    }
  }
}