# 自动化后端接口安全测试报告

> **生成时间**: 2026-01-04 23:02:57
> **目标系统**: http://192.168.236.128
> **检测引擎**: AI-DevSecOps-Bot

---

## 1. 测试概览 (Executive Summary)

| 核心指标 | 数值 | 说明 |
| :--- | :--- | :--- |
| **接口总数** | 118 | 扫描到的 API 数量 |
| **执行用例** | 42 | 实际发起的测试请求总数 |
| **通过率** | **57%** | 符合预期的测试比例 |
| **高危漏洞** | **0** | **鉴权绕过 (越权) 数量** |
| **系统崩溃** | 18 | 业务返回 Code 500 的数量 |
| **网络错误** | 0 | HTTP 层非 200 的数量 |

---

## 2. 测试用例统计概览

| 测试类型 | 总数 | 通过数 | 失败数 | 通过率 |
| :--- | :--- | :--- | :--- | :--- |
| 基准测试 (basic_auth) | 42 | 24 | 18 | 57% |
| 越权测试 (no_auth) | 0 | 0 | 0 | 0% |
| 健壮性测试 (fuzz) | 0 | 0 | 0 | 0% |
| 边界值测试 (boundary) | 0 | 0 | 0 | 0% |
| 总计 | 42 | 24 | 18 | 57% |

---

## 3. 详细测试结果

### 3.1 通过用例概况
成功请求: 24 次 (HTTP 200 且业务码正常)  
鉴权通过: 24 次 (带认证请求正常返回)  
异常请求处理正常: 0 次 (异常输入被正确处理)  
无权限验证正确: 0 次 (无认证请求正确返回 401/403)

#### 3.1.1 基准测试通过接口详情

| 接口路径 (URL) | 方法 | 测试类型 | Payload (复现参数) | 实际业务码 | 服务端提示 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| /monitor/operlog/export | POST | basic_auth | \*\*\* | 200 (Binary response) | Binary response |
| /system/config/export | POST | basic_auth | \*\*\* | 200 (Binary response) | Binary response |
| /system/dict/data/export | POST | basic_auth | \*\*\* | 200 (Binary response) | Binary response |
| /system/dict/type/export | POST | basic_auth | \*\*\* | 200 (Binary response) | Binary response |
| /system/post/export | POST | basic_auth | \*\*\* | 200 (Binary response) | Binary response |
| /system/role/export | POST | basic_auth | \*\*\* | 200 (Binary response) | Binary response |
| /system/user/export | POST | basic_auth | \*\*\* | 200 (Binary response) | Binary response |
| /monitor/job/export | POST | basic_auth | \*\*\* | 200 (Binary response) | Binary response |
| /monitor/jobLog/export | POST | basic_auth | \*\*\* | 200 (Binary response) | Binary response |
| /monitor/cache/getNames | GET | basic_auth | - | 200 | 操作成功 |
| /monitor/cache/getKeys/{cacheName} | GET | basic_auth | cacheName=redis | 200 | 操作成功 |
| /monitor/cache/getValue/{cacheName}/{cacheKey} | GET | basic_auth | cacheName=redis, cacheKey=test | 200 | 操作成功 |
| /monitor/logininfor/unlock/{userName} | GET | basic_auth | userName=admin | 200 | 操作成功 |
| /system/dict/type/optionselect | GET | basic_auth | - | 200 | 操作成功 |
| /getInfo | GET | basic_auth | - | 200 | 操作成功 |
| /getRouters | GET | basic_auth | - | 200 | 操作成功 |
| /system/menu/treeselect | GET | basic_auth | - | 200 | 操作成功 |
| /system/post/optionselect | GET | basic_auth | - | 200 | 操作成功 |
| /system/role/optionselect | GET | basic_auth | - | 200 | 操作成功 |
| /system/role/authUser/allocatedList | GET | basic_auth | - | 200 | 操作成功 |
| /system/role/authUser/unallocatedList | GET | basic_auth | - | 200 | 操作成功 |
| /system/user/authRole/{userId} | GET | basic_auth | userId=103 | 200 | 操作成功 |
| /system/user/deptTree | GET | basic_auth | - | 200 | 操作成功 |

#### 3.1.2 越权测试通过接口详情描述
无通过用例

#### 3.1.3 健壮测试通过接口详情描述
无通过用例

#### 3.1.4 边界值测试通过接口详情描述
无通过用例

### 3.2 失败用例与失败描述

#### 3.2.1 高风险接口详情
无高危漏洞

##### 3.2.2 系统健壮性问题
风险定义: 特殊输入导致服务端抛出异常 (Code 500)，可能暴露堆栈信息。

| 接口路径 (URL) | 方法 | 测试类型 | Payload (复现参数) | 实际业务码 | 服务端提示 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| /test/user/save | POST | basic_auth | \*\*\* | 500 | 用户ID不能为空 |
| /tool/gen/createTable | POST | basic_auth | \*\*\* | 500 | 创建表结构异常 |

#### 3.2.3 其他失败用例

| 接口路径 (URL) | 方法 | 测试类型 | 预期结果 | 实际结果 | 失败描述 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| /system/user/profile/updatePwd | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /system/role/dataScope | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /system/role/changeStatus | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /system/role/authUser/cancel | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /system/role/authUser/cancelAll | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /system/role/authUser/selectAll | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /system/user/resetPwd | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /system/user/changeStatus | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /system/user/authRole | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /test/user/update | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /monitor/job/changeStatus | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /monitor/job/run | POST | basic_auth | 200 | 500 (Request method 'POST' not supported) | 请求方法不支持 |
| /test/user/{userId} | GET | basic_auth | 200 | 500 (用户数据不存在) | 数据不存在 |
| /tool/gen/preview/{tableId} | GET | basic_auth | 200 | 500 (Cannot invoke "com.ruoyi.generator.domain.GenTable.getSubTableName()" because "table" is null) | 空指针异常 |
| /tool/gen/genCode/{tableName} | GET | basic_auth | 200 | 500 (生成代码的模板文件不存在) | 模板文件不存在 |
| /tool/gen/synchDb/{tableName} | GET | basic_auth | 200 | 500 (Cannot invoke "com.ruoyi.generator.domain.GenTable.getColumns()" because "table" is null) | 空指针异常 |

---

## 4. 安全结论与建议

### 4.1 鉴权逻辑分析
* **预期行为**: 未登录访问应返回 `Code: 401`, Msg: `"认证失败"`。  
* **实际发现**: 共发现 **0** 个接口不符合预期。

### 4.2 修复建议
1. **强制鉴权**: 检查 `Shiro/SpringSecurity` 配置，确保上述接口未被排除在过滤器之外。  
2. **异常捕获**: 对 500 错误接口增加全局异常处理 (GlobalExceptionHandler)，避免堆栈外露。

---

## 附录：测试环境信息

- **测试日期**: 2026-01-04
- **测试工具版本**: v1.0-baseline
- **执行模式**: 自动化测试
- **数据来源**: 静态代码分析 + 动态接口调用
- **测试覆盖范围**: 完整 API 接口列表（118 接口），实际执行基准测试 42 个用例