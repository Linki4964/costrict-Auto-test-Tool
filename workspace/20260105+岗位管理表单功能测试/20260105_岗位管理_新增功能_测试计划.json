{
  "test_name": "岗位管理-新增功能测试",
  "precondition": {
    "authenticated": true,
    "auth_type": "Session",
    "base_url": "http://192.168.142.146/"
  },
  "test_cases": [
    {
      "case_name": "正常新增岗位",
      "path_type": "happy",
      "steps": [
        {
          "step_id": "1",
          "description": "导航到登录页面",
          "action": "goto",
          "params": {
            "url": "http://192.168.142.146/login?redirect=%2Findex",
            "expected_status": "200"
          }
        },
        {
          "step_id": "2",
          "description": "点击登录按钮",
          "action": "click",
          "params": {
            "selector": "button[name='登 录']",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "3",
          "description": "等待页面跳转到首页",
          "action": "wait_url",
          "params": {
            "pattern": "**/index",
            "timeout": 5000
          }
        },
        {
          "step_id": "4",
          "description": "点击系统管理菜单",
          "action": "click",
          "params": {
            "selector": "li:has-text('系统管理')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "5",
          "description": "点击岗位管理链接",
          "action": "click",
          "params": {
            "selector": "a[name='岗位管理']",
            "wait_visible": true,
            "timeout": 5000,
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "6",
          "description": "点击新增按钮",
          "action": "click",
          "params": {
            "selector": "button:has-text('新增')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "7",
          "description": "验证新增对话框显示",
          "action": "verify",
          "params": {
            "selector": "[role='dialog']",
            "expected_status": "visible"
          }
        },
        {
          "step_id": "8",
          "description": "输入岗位名称",
          "action": "input",
          "params": {
            "selector": "input[placeholder='请输入岗位名称']",
            "value": "测试岗位_{random_id}",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "9",
          "description": "输入岗位编码",
          "action": "input",
          "params": {
            "selector": "input[placeholder='请输入编码名称']",
            "value": "POST_{random_id}",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "10",
          "description": "输入岗位顺序",
          "action": "input",
          "params": {
            "selector": "input[role='spinbutton']",
            "value": "1",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "11",
          "description": "选择岗位状态-正常",
          "action": "click",
          "params": {
            "selector": "label:has-text('正常') input",
            "expected_status": "checked"
          }
        },
        {
          "step_id": "12",
          "description": "输入备注",
          "action": "input",
          "params": {
            "selector": "textarea[placeholder='请输入内容']",
            "value": "自动化测试备注",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "13",
          "description": "点击确定按钮",
          "action": "click",
          "params": {
            "selector": ".dialog-footer button:has-text('确 定')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "14",
          "description": "验证新增成功提示",
          "action": "verify",
          "params": {
            "selector": "text=新增成功",
            "expected_status": "visible",
            "timeout": 2000
          }
        },
        {
          "step_id": "15",
          "description": "验证对话框关闭",
          "action": "verify",
          "params": {
            "selector": "[role='dialog']",
            "expected_status": "hidden"
          }
        }
      ]
    },
    {
      "case_name": "新增岗位-必填校验",
      "path_type": "validation",
      "steps": [
        {
          "step_id": "1",
          "description": "导航到岗位管理页面",
          "action": "goto",
          "params": {
            "url": "http://192.168.142.146/system/post",
            "expected_status": "200"
          }
        },
        {
          "step_id": "2",
          "description": "点击新增按钮",
          "action": "click",
          "params": {
            "selector": "button:has-text('新增')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "3",
          "description": "直接点击确定按钮不填写必填项",
          "action": "click",
          "params": {
            "selector": ".dialog-footer button:has-text('确 定')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "4",
          "description": "验证岗位名称必填提示",
          "action": "verify",
          "params": {
            "selector": "text=岗位名称不能为空",
            "expected_status": "visible"
          }
        }
      ]
    },
    {
      "case_name": "新增岗位-岗位编码必填校验",
      "path_type": "validation",
      "steps": [
        {
          "step_id": "1",
          "description": "点击新增按钮",
          "action": "click",
          "params": {
            "selector": "button:has-text('新增')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "2",
          "description": "仅填写岗位名称",
          "action": "input",
          "params": {
            "selector": "input[placeholder='请输入岗位名称']",
            "value": "测试岗位_{random_id}",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "3",
          "description": "点击确定按钮",
          "action": "click",
          "params": {
            "selector": ".dialog-footer button:has-text('确 定')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "4",
          "description": "验证岗位编码必填提示",
          "action": "verify",
          "params": {
            "selector": "text=岗位编码不能为空",
            "expected_status": "visible"
          }
        }
      ]
    },
    {
      "case_name": "新增岗位-岗位顺序必填校验",
      "path_type": "validation",
      "steps": [
        {
          "step_id": "1",
          "description": "点击新增按钮",
          "action": "click",
          "params": {
            "selector": "button:has-text('新增')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "2",
          "description": "填写岗位名称和岗位编码",
          "action": "input",
          "params": {
            "selector": "input[placeholder='请输入岗位名称']",
            "value": "测试岗位_{random_id}",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "3",
          "description": "填写岗位编码",
          "action": "input",
          "params": {
            "selector": "input[placeholder='请输入编码名称']",
            "value": "POST_{random_id}",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "4",
          "description": "点击确定按钮",
          "action": "click",
          "params": {
            "selector": ".dialog-footer button:has-text('确 定')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "5",
          "description": "验证岗位顺序必填提示",
          "action": "verify",
          "params": {
            "selector": "text=岗位顺序不能为空",
            "expected_status": "visible"
          }
        }
      ]
    },
    {
      "case_name": "新增岗位-岗位状态选择",
      "path_type": "happy",
      "steps": [
        {
          "step_id": "1",
          "description": "点击新增按钮",
          "action": "click",
          "params": {
            "selector": "button:has-text('新增')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "2",
          "description": "填写岗位名称",
          "action": "input",
          "params": {
            "selector": "input[placeholder='请输入岗位名称']",
            "value": "测试岗位_停用_{random_id}",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "3",
          "description": "填写岗位编码",
          "action": "input",
          "params": {
            "selector": "input[placeholder='请输入编码名称']",
            "value": "POST_DISABLED_{random_id}",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "4",
          "description": "输入岗位顺序",
          "action": "input",
          "params": {
            "selector": "input[role='spinbutton']",
            "value": "2",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "5",
          "description": "选择岗位状态-停用",
          "action": "click",
          "params": {
            "selector": "label:has-text('停用') input",
            "expected_status": "checked"
          }
        },
        {
          "step_id": "6",
          "description": "输入备注",
          "action": "input",
          "params": {
            "selector": "textarea[placeholder='请输入内容']",
            "value": "停用状态测试岗位",
            "expected_status": "input_filled"
          }
        },
        {
          "step_id": "7",
          "description": "点击确定按钮",
          "action": "click",
          "params": {
            "selector": ".dialog-footer button:has-text('确 定')",
            "expected_status": "clicked"
          }
        },
        {
          "step_id": "8",
          "description": "验证新增成功提示",
          "action": "verify",
          "params": {
            "selector": "text=新增成功",
            "expected_status": "visible",
            "timeout": 2000
          }
        }
      ]
    }
  ]
}