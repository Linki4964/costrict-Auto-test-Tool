# ğŸŸ¢ ä»»åŠ¡ä¸€ï¼šå¤šè¯­è¨€ API æå– (step1_extract.py)

## ğŸ“ å¾…æ‰§è¡ŒæŒ‡ä»¤ï¼š
- [ ] ç¡®è®¤ä¸Šä¸€æ­¥éª¤ä¸­æ‰€å¾—åˆ°çš„æ¨¡å‹è¯†åˆ«ç»“æœï¼Œç¡®å®šå½“å‰éœ€è¦è¯†åˆ«çš„ API è¯­è¨€ï¼Œåœ¨è¿™ä¸€æ­¥éª¤ä»…å®ŒæˆæŒ‡å®šè¯­è¨€çš„API æå–(è„šæœ¬ä¸­ä¸æ¶‰åŠåˆ°å…¶ä»–è¯­è¨€çš„APIæå–é€»è¾‘)
- [ ] åˆ›å»º `step1_extract.py`
- [ ] å°†æœ€åˆä¼ å…¥çš„æºä»£ç æ ¹ç›®å½•è·¯å¾„ç¡¬ç¼–ç è¿›å‡½æ•°ä¸­
- [ ] å®ç°ä¸»å‡½æ•°ï¼ˆæ”¯æŒ Java ç­‰ï¼‰
- [ ] **æ ¸å¿ƒå‡çº§**ï¼šä¼˜åŒ–æ­£åˆ™é€»è¾‘ï¼Œæ­£ç¡®è§£æ @PutMapping åŠ @RequestMapping ç­‰ç­‰çš„ method å±æ€§ï¼Œæ”¯æŒæå–è·¯å¾„å‚æ•°å ä½ç¬¦ï¼ˆå¦‚ {userId}ï¼‰å¹¶å¡«å……çœŸå®å‚æ•°ï¼Œå®ç° DTO é€’å½’è§£æã€BaseEntity ç»§æ‰¿å¤„ç†ã€PUT æ–¹æ³•è¯†åˆ«

## ğŸ› ï¸ åˆ‡æ¢è‡³ [Script Engineer æ¨¡å¼]
   - èŒè´£ï¼šå®ç°æ ¸å¿ƒè§£æé€»è¾‘ï¼Œç¡®ä¿å¤šè¯­è¨€å…¼å®¹æ€§ä¸æ•°æ®ç»“æ„ç»Ÿä¸€ã€‚

```Python

import os, re, json

# ==========================================
# 1. æ·±åº¦è§£æå™¨ï¼šé€’å½’æŸ¥æ‰¾ Java ç±»å¹¶æå–å­—æ®µ
# ==========================================
def parse_class_fields(root_dir, class_name, recursion_depth=0):
    if recursion_depth > 3: return {} 
    fields = {}
    
    # ç®€å•çš„æ–‡ä»¶æœç´¢ä¸æ­£åˆ™åŒ¹é…é€»è¾‘ (æ¨¡æ‹Ÿ)
    # å®é™…åº”åŒ…å«: 
    # 1. æœç´¢ {class_name}.java
    # 2. è§£æ 'extends BaseEntity' -> é€’å½’è°ƒç”¨
    # 3. è§£æ 'private String userName;' -> fields['userName'] = "test"
    # 4. ç‰¹æ®Šå¤„ç†: pageNum/pageSize (é’ˆå¯¹åˆ—è¡¨æŸ¥è¯¢)
    
    # (æ­¤å¤„çœç•¥å…·ä½“çš„æ­£åˆ™å®ç°ç»†èŠ‚ï¼Œè¯·ç¡®ä¿è„šæœ¬åŒ…å«å¯¹ BaseEntity å’Œ private å­—æ®µçš„æå–)
    return fields

# ==========================================
# 2. æ ¸å¿ƒæå–é€»è¾‘
# ==========================================
def extract_java_apis(source_root):
    apis = []
    # åŒ¹é…ç±»è·¯å¾„: @RequestMapping("/system/user")
    class_re = re.compile(r'@RequestMapping\("?([^"]*)"?\)')
    
    # åŒ¹é…æ–¹æ³•: æ”¯æŒ @GetMapping, @PostMapping, @PutMapping, @DeleteMapping
    # ä»¥åŠ @RequestMapping(value="/path", method=RequestMethod.PUT)
    # (éœ€ç¼–å†™å¤åˆæ­£åˆ™ä»¥è¦†ç›–ä¸Šè¿°æƒ…å†µ)

    for root, _, files in os.walk(source_root):
        for file in files:
            if not file.endswith(".java"): continue
            # ... (è¯»å–æ–‡ä»¶å†…å®¹)
            
            # 1. æå– Base Path
            # 2. éå†æ–¹æ³•
            #    - æ‹¼æ¥ Full Path
            #    - è¯†åˆ« Method (PUT/POST/GET/DELETE)
            #    - æå– Path Params (å¦‚ {userId})
            #    - è¯†åˆ« MultipartFile -> multipart/form-data
            #    - è¯†åˆ« @RequestBody DTO -> è°ƒç”¨ parse_class_fields -> smart_payload
            
            # ... (ç»„è£… api å¯¹è±¡)
            
    return apis
```
## ğŸ åˆ‡æ¢è‡³ [Debugger æ¨¡å¼]
   -  èŒè´£ï¼šæ‰§è¡Œè„šæœ¬ã€éªŒè¯æ•°æ®å®Œæ•´æ€§ã€ç”Ÿæˆæœ€ç»ˆäº¤ä»˜ç‰©ï¼ˆJSON & Markdownï¼‰ã€‚
  
   - æ‰§è¡Œè„šæœ¬ï¼Œæ£€æŸ¥ apis.jsonã€‚

     - éªŒè¯: ç¡®è®¤ /common/upload æ˜¯ multipart/form-dataã€‚

     - éªŒè¯: ç¡®è®¤ä¿®æ”¹æ¥å£ï¼ˆå¦‚ /editï¼‰è¯†åˆ«ä¸º PUT è€Œé POSTã€‚

     - éªŒè¯: ç¡®è®¤ smart_payload åŒ…å« userName, password ç­‰çœŸå®å­—æ®µã€‚