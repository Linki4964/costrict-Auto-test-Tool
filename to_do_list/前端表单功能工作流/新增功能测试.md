##  项目背景
- 目标: 实现完全 AI 自主探测与测试，无需人工干预。
- 读取`frontend.json`获取相关配置
- 测试范围:仅测试系统管理界面的用户管理界面的 `新增`功能
## 切换至plan designer模式：
1. 前往项目的源代码界面，进行相关代码的审计，包括明确页面的元素，API接口的数量
2. 重点分析确定用户新增界面会有哪些需要提交的信息
3. 进行计划的制定，以接口的数量作为参照，制定计划，不需要制定安全计划，兼容性计划，仅需要测试pc平台的功能性问题
4. 以jason格式输出至工作区，清楚多余计划至保留唯一的计划
## 切换至script engineer模式
1. 读取plan designer制定的计划，严格按照计划进行执行，并且充分理解计划
2. 网站有登录验证，请先进行登录，并且进入后点击左侧的状态栏才可以切换到功能界面,每次编写脚本都请先写这个操作一定一定要写！！！！！！！！！
3. 本测试为黑盒测试，你需要先编写探测器，得到点击新增以后的表单弹出的表单所有的元素
4. 根据探测器返回的元素，进行编写脚本，确保网站真实存在这些元素
5. 编写脚本的时候先使用以下模板进行登录和导航(默认填写密码不需要只需要点击登录！！！！！)
```python  
            page.goto('{url}')
            # 1. 登录
            page.get_by_role("button", name="登 录").click()
            # 等待 URL 跳转到首页，确保页面加载完成
            page.wait_for_url("**/index") 
            # 2. 导航到用户管理 (加固版)
            print("正在展开侧边栏菜单...")
            # 找到包含“系统管理”文字的菜单项并点击
            system_menu = page.locator("li").filter(has_text="{测试目标}").first
            system_menu.click()
            # 给一点点缓冲时间让菜单展开动画完成（或显式等待子菜单可见）
            user_link = page.get_by_role("link", name="用户管理")
            user_link.wait_for(state="visible", timeout=5000)
            user_link.click()
            print("已进入用户管理页面")
```
6. 进入导航页以后按照探测到元素新增,脚本按照以下模板
```python
   # 若依的新增按钮通常带有特定的类名，或者可以用文本匹配
            page.get_by_role("button", name="新增").click()

            # 4. 填写表单 (使用提供的诊断逻辑)
            dialog = page.get_by_role("dialog")
            # 自动生成一个随机后缀，防止重复无法提交
            import random
            test_id = random.randint(1000, 9999)
            
            print(f"填写用户信息: ai_test_{test_id}")
            dialog.get_by_placeholder("请输入用户昵称").fill(f"昵称_{test_id}")
            
            # 部门选择 (Vue-treeselect 容易出错，改用更通用的定位器)
            page.locator(".vue-treeselect__control").click()
            page.locator(".vue-treeselect__menu").get_by_text("若依科技").first.click()

            dialog.get_by_placeholder("请输入手机号码").fill(f"1380000{test_id}")
            dialog.get_by_placeholder("请输入邮箱").fill(f"test{test_id}@qq.com")
            dialog.get_by_placeholder("请输入用户名称").fill(f"user_{test_id}")
            dialog.get_by_placeholder("请输入用户密码").fill("123456") # 若依新增通常需要密码

            # 提交与验证
            print("提交表单...")
            page.locator(".el-dialog__footer").get_by_role("button", name="确 定").click()
```
6. 一定要新增元素成功，一定要点击确认保证真正添加一个新用户才可以执行下一步测试,使用以下模板进行分析
```python
            success_msgs = ["操作成功", "新增成功", "保存成功"]
            success_found = False
            for msg in success_msgs:
                try:
                    # 降低 timeout 以便快速切换检查
                    expect(page.get_by_text(msg)).to_be_visible(timeout=2000)
                    success_found = True
                    print(f"[PASS] 找到提示: {msg}")
                    break
                except:
                    continue
```
## 切换至debugger
1. 必须运行生成的脚本，并且根据脚本返回的情况真是的对脚本的问题进行分析
2. 根据错误的分析结果，修改脚本，对脚本进行编写
3. 整理工作区，删除多余的脚本仅仅保留可以复现的脚本
4. 生成该功能模块测试脚本并且生成一个小型报告，以json格式


