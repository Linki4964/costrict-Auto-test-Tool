# CodeSentinel自动化测试工作流

## 项目简介

**CodeSentinel**是一个为 AI 编码时代设计的**高级自动化测试工作流**。它将自动化测试工作流深度集成到大语言模型 (LLM) 的开发流程中，旨在解决传统测试需要花费大量人力时间与测试过程常常重复且枯燥的问题。
系统通过多模态架构，利用专业的 AI 角色，实现从代码审计、测试计划生成、测试用例设计、测试脚本编写，到自动执行和问题自我修复的全链路自动化。CodeSentinel 核心价值在于将测试工作成为一个高度自动化且高度稳定性的工作流，确保每一个测试的模块都可以被AI进行完整链路与高覆盖度的测试

## 系统架构的简要描述
CodeSentinel 采用多模态架构(Multimodal) 的模块化架构，将复杂的测试流程解耦为不同的Agent模块和执行环境，总的来讲就是“让专业的人做专业的事情
![alt text](image/image.png)


- 编排层(CoStrict/LLM)：
    - 作为中央控制器，我们认为这是AI的大脑，理解用户提出的指令，识别to_do_list调用正确的 AI Agent，并根据运行的结果驱动流程的推进（成功）或循环（失败）。
- AI Agents 层 (Custom Modes)：
    - Plan Designer： 审计代码，制定测试计划包括测试用例、测试步骤、测试判定，输出结构化用例 (JSON)，给予Script Designer进行阅读。
    - Script Engineer： 阅读Plan Desinger制定的计划，编写探测器，探测前端元素（前端测试时），获取网页元素，基于playwirht架构（前端测试），pytest架构架构（后端测试）生成测试脚本。
    - Debugger： 执行script engineer编写的测试脚本，获取测试结果，修复运行错误，总结测试的结果，编写测试报告。
- 执行与反馈层
    - 待测项目代码仓库，实际运行项目（前端/后端），运行结果信息反馈

- 拓展：
在我们的实际开发过程中，我们发现该工作流存在一些感知局限性问题以及模型的生成边界限制的问题，因此我们为该工作流添加了一些拓展来让模型更好的完成该测试工作
    -  黑盒页面探测拓展：在实际开发过程中我们发现因为vue页面是动态渲染的架构，因此AI模型可能会出现因为无法得知前端页面实际的页面的元素以及元素的位置而出现定位错误以及自行编造信息的情况，因此我们的为他添加了探测器来正确获取前端页面的元素。
    - 规范测试报告生成拓展：AI生成的内容具有随机性，因此我们需要给AI提供一个统一化模板拓展，来保证他每次生成的模板都符合我们的规定。

## 工作流介绍

![工作流图解](image/image2.png)

##  项目目录结构
```
.
├── 工作区/         # AI 进行测试工作的核心目录：存放计划、脚本及生成汇报
├── .roo/          # 存放 CoStrict 模型的提示词（定义 AI 的行为边界）
├── 提示词/         # 汇总各个模型的提示词模版
└── to_do_list     # 测试工作流优化说明 (README)
```

